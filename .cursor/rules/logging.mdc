---
description: logging rules
globs:
alwaysApply: true
---

# Exception Logging Guidelines

## 1. Library / lower-level functions
- ✅ Raise exceptions for error conditions.  
- ❌ Do **not** log inside library functions.  
- ✅ Let the caller decide how to handle or log the exception.

## 2. Top-level / boundary code
*(API endpoints, workers, CLI commands, jobs)*
- ✅ Log exceptions when handling them.  
- ✅ Include full context (stack trace, input parameters).  
- ✅ Decide whether to handle or propagate the exception after logging.

## 3. Retryable operations
- ✅ Log **warnings** for transient failures that will be retried.  
- ✅ Log **errors** only after retries are exhausted.